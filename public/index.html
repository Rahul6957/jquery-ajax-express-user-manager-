<!DOCTYPE html>
<html>
<head>
  <title>User Manager</title>
</head>
<body>

<h2>Add New User</h2>
<input type="text" id="username" placeholder="Enter name">
<button id="addUser">Add</button>
<button id="btn1">Show List</button>
<hr>

<ul id="userList" style="display:none;"></ul>
<!-- <button id="btn1">Show List</button>

 jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
// LOAD USERS FUNCTION
function loadUsers() {
  $.ajax({
    url: "/users",
    type: "GET",
    success: function(data) {
      $("#userList").empty();
      data.forEach(u => {
        $("#userList").append(`<li>${u.name}</li>`);
      });
    }
  });
}

// SHOW LIST BUTTON
$("#btn1").click(function () {
  loadUsers();          // load data
 
   $("#userList").toggle();
  // show list
});

// ADD USER
$("#addUser").click(function() {
  let name = $("#username").val();

  $.ajax({
    url: "/users",
    type: "POST",
    data: JSON.stringify({ name }),
    contentType: "application/json",
    success: function() {
      $("#username").val("");
      // do NOT auto show list
    }
  });
});
</script>

</body>
</html>
